{{extend 'layout.html'}}

{{block head}}
<script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBf-IjT8bV8XgVG_xl2B6U6DZA58l1GICI"></script>
<script defer src="{{=URL('static', 'js/gmaps.js')}}"></script>
<script defer src="{{=URL('static', 'js/vue.js')}}"></script>
<script src="https://cdn.jsdelivr.net/emojione/2.2.6/lib/js/emojione.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/emojione/2.2.6/assets/css/emojione.min.css"/>
<script>
    var my_url = "{{=URL('api', 'my_method', hmac_key=session.hmac_key)}}";
    var getMarkerUrl = "{{=URL('api', 'getmarkers', hmac_key=session.hmac_key)}}";
    var addEventUrl = "{{=URL('api', 'addevent', hmac_key=session.hmac_key)}}";
    var feedbackUrl = "{{=URL('api', 'confirm', hmac_key=session.hmac_key)}}";
    var checkLoginUrl = "{{=URL('api', 'checklogin', hmac_key=session.hmac_key)}}";
</script>
<link rel="stylesheet" href="{{URL('static', 'css/bootstrap-datetimepicker.min.css')}}"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/emojione/2.2.6/assets/css/emojione.min.css"/>
<script defer src="{{=URL('static', 'js/moment.js')}}"></script>
<script defer src="{{=URL('static', 'js/bootstrap-datetimepicker.min.js')}}"></script>

{{end}}

<div class="main_content">
    <div id="vue-div" style="display: none">

        <div id="event_view" class="col-xs-4" v-if="page=='event_view'">
            <form>

                <div class="form-group">
                    <input v-model="addr" type="text" class="form-control"
                           v-bind:disabled="usingMapMarker"
                           placeholder="address">
                    <input type="checkbox" v-model="usingMapMarker" id="checkbox"><label for="checkbox">Or Place
                    Map Marker</label>
                </div>
                <div v-if="markerError" class="alert alert-danger alert-dismissible" role="alert">
                    <button type="button" class="close" v-on:click="markerError = false" aria-label="Close">
                        <i class="fa fa-close fa-lg"
                           aria-hidden="true"></i></button>
                    <strong>Warning!</strong> You have not chosen a marker for this!
                </div>
                <div v-if="addressError" class="alert alert-danger alert-dismissible" role="alert">
                    <button type="button" class="close" v-on:click="addressError = false" aria-label="Close">
                        <i class="fa fa-close fa-lg"
                           aria-hidden="true"></i></button>
                    <strong>Warning!</strong> Your Address Search returned No results!
                </div>

                <div class="form-group">
                    <input v-model="title" type="text" class="form-control" placeholder="event title">
                </div>
                <div class="form-group">
                    <textarea v-model="desc" type="text" class="form-control" placeholder="event description"></textarea>
                </div>

                <div class="form-group">
                    <div class='input-group date' id='datetimepicker1'>
                        <input type='text' class="form-control" />
                        <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                    </div>
                </div>

                <button type="submit" v-on:click.prevent="add_event_marker(addr, title, desc)" class="btn
                btn-default"
                v-bind:disabled="!islogged">PostMarker</button>
                <div v-if="inputError" class="alert alert-danger alert-dismissible" role="alert">
                    <button type="button" class="close" v-on:click="inputError = false" aria-label="Close">
                        <i class="fa fa-close fa-lg"
                           aria-hidden="true"></i></button>
                    <strong>Warning!</strong> There are errors with your input!
                </div>


            </form>

        </div>

        <div id="map" class="col-xs-7">
        </div>
    </div>
</div>



<script defer src="{{=URL('static', 'js/default_index.js')}}"></script>
